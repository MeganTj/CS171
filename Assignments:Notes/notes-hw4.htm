<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0077)http://courses.cms.caltech.edu/cs171/assignments/hw4/hw4-notes/notes-hw4.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
   <title></title> 
 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.tug.org/tex4ht/)"> 
<!-- html,mathml,imgdir:eqn-imgs/ --> 
<meta name="src" content="notes-hw4.tex"> 
<link rel="stylesheet" type="text/css" href="./notes-hw4_files/notes-hw4.css"> 
 <script src="./notes-hw4_files/MathJax.js" id=""></script> 
 <style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax_LineBox {display: table!important}
.MathJax_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Blank; src: url('about:blank')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head><body><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
<!--l. 36--><p class="noindent">  <link rel="stylesheet" type="text/css" href="./notes-hw4_files/background.css">  
<!--l. 38--></p><p class="noindent"> <span class="cmbx-12x-x-207">Assignment 4 Lecture Notes</span>
<!--l. 43--></p><p class="noindent"> <a id="Part1"><span class="cmbx-12x-x-172">Part 1: Per pixel Lighting</span></a>
<!--l. 48--></p><p class="noindent">By default, OpenGL only calculates lighting at vertices, and then interpolates the colors
at each pixel on the triangle. With this technique, undesirable artifacts of the mesh
representation are quite obvious, especially in specular highlights. Gourad shading is a
form of per-vertex lighting and is very similar to the default lighting model used by
OpenGL. On the other hand, Phong shading calculates the lighting for each pixel in a
polygon. This is a form of per-pixel lighting and can be implemented using OpenGL
shaders.
<!--l. 50--></p><p class="noindent">GLSL is a high-level language for writing GPU programs. There are two types of shaders
in GLSL, vertex shaders and fragment shaders. These shaders override parts of the
default OpenGL pipeline. Since the shaders are replacements for parts of the default
pipeline, you sometimes must reimplement the functionality included in the default
parts.
<!--l. 52--></p><p class="noindent"><span class="cmbx-12">Vertex shaders </span>are responsible for all per-vertex calculations. The default pipeline converts
vertices from object space to NDC and performs per-vertex lighting and texture coordinate
calculations.
<!--l. 54--></p><p class="noindent"><span class="cmbx-12">Fragment shaders </span>are responsible for all per-pixel calculations. The OpenGL rasterizer
automatically interpolates all per-vertex data for each pixel. The default pipeline simply sets
output color of the pixel to the interpolated vertex color.
<!--l. 56--></p><p class="noindent">GLSL has very similar syntax to C. The main function is the entry point for both vertex
and fragment shaders. The language includes builtin support for vector and matrix
operations.
<!--l. 58--></p><p class="noindent"><a href="http://www.khronos.org/files/opengl-quick-reference-card.pdf">This reference</a> describes all of the built-in functions and variables.
<!--l. 60--></p><p class="noindent">GLSL types:
                                                                                         
                                                                                         
   </p><div class="verbatim" id="verbatim-1">
float,&nbsp;vec2,&nbsp;vec3,&nbsp;vec4
&nbsp;<br>int,&nbsp;ivec2,&nbsp;ivec3,&nbsp;ivec4
&nbsp;<br>bool,&nbsp;bvec2,&nbsp;bvec3,&nbsp;bvec4
&nbsp;<br>mat2,&nbsp;mat3,&nbsp;mat4
</div>
<!--l. 67--><p class="nopar">
<!--l. 69--></p><p class="noindent">GLSL functions:
                                                                                         
                                                                                         
   </p><div class="verbatim" id="verbatim-2">
dot
&nbsp;<br>sin,&nbsp;cos,&nbsp;pow,&nbsp;abs,&nbsp;etc.&nbsp;(in&nbsp;radians)
&nbsp;<br>ftransform&nbsp;-&nbsp;Fixed&nbsp;transformation&nbsp;to&nbsp;NDC
&nbsp;<br>reflect
</div>
<!--l. 76--><p class="nopar">
<!--l. 78--></p><p class="noindent">GLSL includes built-in variables that are used to pass data into and out of the shader.
<!--l. 80--></p><p class="noindent">Vertex Shader Built-in Variables:
                                                                                         
                                                                                         
   </p><div class="verbatim" id="verbatim-3">
gl_Vertex:&nbsp;Object&nbsp;space&nbsp;position
&nbsp;<br>gl_Normal:&nbsp;Object&nbsp;space&nbsp;normal
</div>
<!--l. 85--><p class="nopar">
<!--l. 87--></p><p class="noindent">Vertex Shader Outputs
                                                                                         
                                                                                         
   </p><div class="verbatim" id="verbatim-4">
gl_FrontColor:&nbsp;Write&nbsp;color&nbsp;here
&nbsp;<br>gl_Position:&nbsp;Write&nbsp;output&nbsp;NDC&nbsp;position
</div>
<!--l. 92--><p class="nopar">
<!--l. 94--></p><p class="noindent">Pixel Shader
                                                                                         
                                                                                         
   </p><div class="verbatim" id="verbatim-5">
gl_Color:&nbsp;Interpolated&nbsp;per-vertex&nbsp;color
&nbsp;<br>gl_FragColor:&nbsp;Write&nbsp;output&nbsp;color&nbsp;here
</div>
<!--l. 99--><p class="nopar">
<!--l. 101--></p><p class="noindent">Both Shader Variables:
                                                                                         
                                                                                         
   </p><div class="verbatim" id="verbatim-6">
gl_LightModelParameters.ambient
&nbsp;<br>gl_LightSource[0].diffuse,&nbsp;etc.
&nbsp;<br>gl_FrontMaterial.diffuse,&nbsp;etc.
&nbsp;<br>gl_ModelViewMatrix:&nbsp;Transform&nbsp;points&nbsp;to&nbsp;camera&nbsp;space.
&nbsp;<br>gl_ProjectionMatrix
&nbsp;<br>gl_NormalMatrix:&nbsp;Transform&nbsp;for&nbsp;normals&nbsp;to&nbsp;camera&nbsp;space.
</div>
<!--l. 110--><p class="nopar">
<!--l. 112--></p><p class="noindent">GLSL also has special keywords to declare other variables to pass data in or out of the shader.
Uniform allows the program to specify a value that will be readable by the shader programs for
each vertex and fragment. Attribute allows values to be provided to the shader per
vertex. Varying declares data per vertex that will be interpolated automatically for each
pixel and passed to the fragment shader. Attributes can’t be defined in the fragment
shader.
   </p><div class="tabular"> <table id="TBL-1" class="tabular" cellspacing="0" cellpadding="0"><colgroup id="TBL-1-1g"><col id="TBL-1-1"><col id="TBL-1-2"><col id="TBL-1-3"><col id="TBL-1-4"></colgroup><tbody><tr style="vertical-align:baseline;" id="TBL-1-1-"><td style="text-align:center; white-space:nowrap;" id="TBL-1-1-1" class="td11"> keyword  </td><td style="text-align:center; white-space:nowrap;" id="TBL-1-1-2" class="td11">   Source     </td><td style="text-align:center; white-space:nowrap;" id="TBL-1-1-3" class="td11">      Destination          </td><td style="text-align:center; white-space:nowrap;" id="TBL-1-1-4" class="td11">Interpolation</td>
</tr><tr class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr style="vertical-align:baseline;" id="TBL-1-2-"><td style="text-align:center; white-space:nowrap;" id="TBL-1-2-1" class="td11"> <span class="pcrr7t-x-x-120">uniform </span></td><td style="text-align:center; white-space:nowrap;" id="TBL-1-2-2" class="td11">   CPU      </td><td style="text-align:center; white-space:nowrap;" id="TBL-1-2-3" class="td11">Fragment + Vertex shaders</td><td style="text-align:center; white-space:nowrap;" id="TBL-1-2-4" class="td11">  per pass   </td>
</tr><tr style="vertical-align:baseline;" id="TBL-1-3-"><td style="text-align:center; white-space:nowrap;" id="TBL-1-3-1" class="td11"><span class="pcrr7t-x-x-120">attribute</span></td><td style="text-align:center; white-space:nowrap;" id="TBL-1-3-2" class="td11">   CPU      </td><td style="text-align:center; white-space:nowrap;" id="TBL-1-3-3" class="td11">     Vertex shader         </td><td style="text-align:center; white-space:nowrap;" id="TBL-1-3-4" class="td11"> per vertex  </td>
</tr><tr style="vertical-align:baseline;" id="TBL-1-4-"><td style="text-align:center; white-space:nowrap;" id="TBL-1-4-1" class="td11"> <span class="pcrr7t-x-x-120">varying </span></td><td style="text-align:center; white-space:nowrap;" id="TBL-1-4-2" class="td11">Vertex shader</td><td style="text-align:center; white-space:nowrap;" id="TBL-1-4-3" class="td11">    Fragment shader       </td><td style="text-align:center; white-space:nowrap;" id="TBL-1-4-4" class="td11">  per pixel   </td> </tr></tbody></table></div>
<!--l. 121--><p class="noindent">Sample vertex and fragment shaders:
   </p><div class="fancyvrb" id="fancyvrb1"><a id="x1-23r1"></a><span id="textcolor1"><span class="pcrro7t-x-x-120">//vertex</span><span class="pcrro7t-x-x-120">&nbsp;shader</span></span><br class="fancyvrb"><a id="x1-25r2"></a><span id="textcolor2"><span class="pcrb7t-x-x-120">varying</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor3"><span class="pcrb7t-x-x-120">vec3</span></span><span class="pcrr7t-x-x-120">&nbsp;normal,lightDir;</span><br class="fancyvrb"><a id="x1-27r3"></a><span id="textcolor4"><span class="pcrb7t-x-x-120">void</span></span><span class="pcrr7t-x-x-120">&nbsp;main()</span>
<br class="fancyvrb"><a id="x1-29r4"></a><span class="pcrr7t-x-x-120">{</span><br class="fancyvrb"><a id="x1-31r5"></a><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;normal</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor5"><span class="pcrr7t-x-x-120">=</span></span><span class="pcrr7t-x-x-120">&nbsp;normalize(</span><span id="textcolor6"><span class="pcrr7t-x-x-120">gl_NormalMatrix</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor7"><span class="pcrr7t-x-x-120">&#8902;</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor8"><span class="pcrr7t-x-x-120">gl_Normal</span></span><span class="pcrr7t-x-x-120">);</span>
<br class="fancyvrb"><a id="x1-33r6"></a><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor9"><span class="pcrb7t-x-x-120">vec3</span></span><span class="pcrr7t-x-x-120">&nbsp;viewPos</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor10"><span class="pcrr7t-x-x-120">=</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor11"><span class="pcrb7t-x-x-120">vec3</span></span><span class="pcrr7t-x-x-120">(</span><span id="textcolor12"><span class="pcrr7t-x-x-120">gl_ModelViewMatrix</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor13"><span class="pcrr7t-x-x-120">&#8902;</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor14"><span class="pcrr7t-x-x-120">gl_Vertex</span></span><span class="pcrr7t-x-x-120">);</span>
<br class="fancyvrb"><a id="x1-35r7"></a><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;lightDir</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor15"><span class="pcrr7t-x-x-120">=</span></span><span class="pcrr7t-x-x-120">&nbsp;normalize(</span><span id="textcolor16"><span class="pcrb7t-x-x-120">vec3</span></span><span class="pcrr7t-x-x-120">(</span><span id="textcolor17"><span class="pcrr7t-x-x-120">gl_LightSource</span></span><span class="pcrr7t-x-x-120">[</span><span id="textcolor18"><span class="pcrr7t-x-x-120">0</span></span><span class="pcrr7t-x-x-120">].position)</span><span id="textcolor19"><span class="pcrr7t-x-x-120">-</span></span><span class="pcrr7t-x-x-120">viewPos);</span>
<br class="fancyvrb"><a id="x1-37r8"></a><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor20"><span class="pcrr7t-x-x-120">gl_Position</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor21"><span class="pcrr7t-x-x-120">=</span></span><span class="pcrr7t-x-x-120">&nbsp;ftransform();</span><br class="fancyvrb"><a id="x1-39r9"></a><span class="pcrr7t-x-x-120">}</span><br class="fancyvrb"><a id="x1-41r10"></a><br class="fancyvrb"><a id="x1-43r11"></a><span id="textcolor22"><span class="pcrro7t-x-x-120">//fragment</span><span class="pcrro7t-x-x-120">&nbsp;shader</span></span><br class="fancyvrb"><a id="x1-45r12"></a><span id="textcolor23"><span class="pcrb7t-x-x-120">varying</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor24"><span class="pcrb7t-x-x-120">vec3</span></span><span class="pcrr7t-x-x-120">&nbsp;normal,lightDir;</span>
<br class="fancyvrb"><a id="x1-47r13"></a><span id="textcolor25"><span class="pcrb7t-x-x-120">void</span></span><span class="pcrr7t-x-x-120">&nbsp;main()</span><br class="fancyvrb"><a id="x1-49r14"></a><span class="pcrr7t-x-x-120">{</span><br class="fancyvrb"><a id="x1-51r15"></a><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor26"><span class="pcrb7t-x-x-120">vec4</span></span><span class="pcrr7t-x-x-120">&nbsp;color</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor27"><span class="pcrr7t-x-x-120">=</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor28"><span class="pcrr7t-x-x-120">gl_LightModel</span></span><span class="pcrr7t-x-x-120">.ambient</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor29"><span class="pcrr7t-x-x-120">&#8902;</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor30"><span class="pcrr7t-x-x-120">gl_FrontMaterial</span></span><span class="pcrr7t-x-x-120">.ambient;</span>
<br class="fancyvrb"><a id="x1-53r16"></a><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor31"><span class="pcrb7t-x-x-120">float</span></span><span class="pcrr7t-x-x-120">&nbsp;NdotL</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor32"><span class="pcrr7t-x-x-120">=</span></span><span class="pcrr7t-x-x-120">&nbsp;max(dot(normalize(normal),normalize(lightDir)),</span><span id="textcolor33"><span class="pcrr7t-x-x-120">0.0</span></span><span class="pcrr7t-x-x-120">);</span><br class="fancyvrb"><a id="x1-55r17"></a><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor34"><span class="pcrb7t-x-x-120">if</span></span><span class="pcrr7t-x-x-120">&nbsp;(NdotL</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor35"><span class="pcrr7t-x-x-120">&gt;</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor36"><span class="pcrr7t-x-x-120">0.0</span></span><span class="pcrr7t-x-x-120">)</span>
<br class="fancyvrb"><a id="x1-57r18"></a><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;color</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor37"><span class="pcrr7t-x-x-120">+=</span></span><span class="pcrr7t-x-x-120">&nbsp;(</span><span id="textcolor38"><span class="pcrr7t-x-x-120">gl_FrontMaterial</span></span><span class="pcrr7t-x-x-120">.diffuse</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor39"><span class="pcrr7t-x-x-120">&#8902;</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor40"><span class="pcrr7t-x-x-120">gl_LightSource</span></span><span class="pcrr7t-x-x-120">[</span><span id="textcolor41"><span class="pcrr7t-x-x-120">0</span></span><span class="pcrr7t-x-x-120">].diffuse</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor42"><span class="pcrr7t-x-x-120">&#8902;</span></span><span class="pcrr7t-x-x-120">&nbsp;NdotL);</span>
<br class="fancyvrb"><a id="x1-59r19"></a><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor43"><span class="pcrr7t-x-x-120">gl_FragColor</span></span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor44"><span class="pcrr7t-x-x-120">=</span></span><span class="pcrr7t-x-x-120">&nbsp;color;</span><br class="fancyvrb"><a id="x1-61r20"></a><span class="pcrr7t-x-x-120">}</span></div>
<!--l. 146--><p class="noindent">CPU code:
   </p><div class="fancyvrb" id="fancyvrb2"><a id="x1-65r1"></a><span class="pcrr7t-x-x-120">GLuint</span><span class="pcrr7t-x-x-120">&nbsp;uniformTestLoc</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor45"><span class="pcrr7t-x-x-120">=</span></span><span class="pcrr7t-x-x-120">&nbsp;glGetUniformLocation(simpleProgram,</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor46"><span class="pcrr7t-x-x-120">"uniformTestValue"</span></span><span class="pcrr7t-x-x-120">);</span>
<br class="fancyvrb"><a id="x1-67r2"></a><span class="pcrr7t-x-x-120">glUniform1i(uniformTestLoc,</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor47"><span class="pcrr7t-x-x-120">5</span></span><span class="pcrr7t-x-x-120">);</span></div>
<!--l. 153--><p class="noindent">For many shading tasks, it is easiest to perform all of the calculations in camera space, with the
eye at the origin of the space. OpenGL provides the builtin <span class="pcrr7t-x-x-120">gl_ModelViewMatrix </span>and
<span class="pcrr7t-x-x-120">gl_NormalMatrix </span>variables for this purpose. As in Assignment 2, the normal vectors must be
transformed with a different transformation in order to remain normal to transformed
surfaces.
<!--l. 155--></p><p class="noindent"> <a id="Part2"><span class="cmbx-12x-x-172">Part 2: Texturing and Normal Mapping</span></a>
                                                                                         
                                                                                         
<!--l. 160--></p><p class="noindent">Texturing is used to get much more detail out of rendering, than just from the vertex
data alone. A very common application of (multi)texturing is the use of a combination
of a normal map texture and a color texture to render in ’3D’ on a completely flat
surface.
<!--l. 162--></p><p class="noindent">Texture mapping is a way to apply surface detail from a raster image to a 3D model. A texture
map is applied (mapped) to the surface of a shape or polygon. This process is akin to applying
patterned paper to a plain white box. Every vertex in a polygon is assigned a texture coordinate.
Image sampling locations are then interpolated across the face of a polygon to produce a visual
result.
</p><div class="center">
<!--l. 166--><p class="noindent">
<!--l. 167--></p><p class="noindent"><img src="./notes-hw4_files/mapping.png" alt="pict" width="704.63252pt"><br>
<span class="cmbx-12">Figure 1: </span>Each vertex is assigned a coordinate for a point on the texture. The texture is
then ”wrapped” onto the object with the corresponding points in the texture matching up
with the vertexes.</p></div>
<!--l. 171--><p class="noindent">If texture coordinates are linearly interpolated in screen space, this results in a distortion of the
texture for triangles at an angle to the screen that can be seen as a discontinuity between adjacent
triangles. This is not particularly apparent when interpolating colors, but is often very obvious
when interpolating texture coordinates depending on the texture. Perspective correct texturing
accounts for the 3D position of the triangle, and produces a correct visual effect. This is
accomplished by linearly interpolating the value divided by the depth of the vertices, then
multiplying by the depth of the corresponding pixel. OpenGL interpolation automatically performs
perspective-correct interpolation.
</p><div class="center">
<!--l. 174--><p class="noindent">
<!--l. 175--></p><p class="noindent"><img src="./notes-hw4_files/perspective.png" alt="pict" width="704.63252pt"><br>
<span class="cmbx-12">Figure 2: </span>Linearly interpolating texture coordinates results in noticeable artifacts for
polygons at an angle to the screen. Perspective correct interpolation corrects for this effect.</p></div>
<!--l. 180--><p class="noindent">GLSL has built-in capabilities for mapping textures to the surface of objects and sampling those
textures. In the fragment shader we can write <span class="pcrr7t-x-x-120">gl_TexCoord[0] = gl_MultiTexCoord0;</span>
This takes the per-vertex texture coordinates and stores them in a builtin varying array that will
be interpolated for the fragment shader. In the fragment shader we declare <span class="pcrr7t-x-x-120">uniform sampler2D</span>
<span class="pcrr7t-x-x-120">texture; </span>which will be set by the C++ program. In order to access the corresponding texture
color for a pixel, we just need to <span class="pcrr7t-x-x-120">color = texture2D(texture, gl_TexCoord[0].st);</span>
in GLSL. OpenGL assigns coordinates from 0 to 1 for points in a rectangular texture. If a texture
should cover an entire face, the texture coordinates for the vertexes should be 0 and 1 for u and
v.
<!--l. 182--></p><p class="noindent">For normal mapping, we use 2 textures, one for the color of the material, and another texture as
the normal map. The normal map is generally used to hold fine 3D details that would be very
computationally expensive to include in the polygon mesh.
                                                                                         
                                                                                         
<!--l. 184--></p><p class="noindent">A normal map takes the <!--l. 184--><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;inline&quot;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo class=&quot;MathClass-punc&quot;&gt;,&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo class=&quot;MathClass-punc&quot;&gt;,&lt;/mo&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 2.287em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.166em; height: 0px; font-size: 104%;"><span style="position: absolute; clip: rect(1.986em, 1002.17em, 2.948em, -999.997em); top: -2.581em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo MathClass-punc" id="MathJax-Span-4" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-5" style="font-family: STIXGeneral-Italic; padding-left: 0.183em;">y</span><span class="mo MathClass-punc" id="MathJax-Span-6" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-7" style="font-family: STIXGeneral-Italic; padding-left: 0.183em;">z</span></span><span style="display: inline-block; width: 0px; height: 2.587em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>x</mi><mo class="MathClass-punc">,</mo><mi>y</mi><mo class="MathClass-punc">,</mo><mi>z</mi></math></span></span><script type="math/mml" id="MathJax-Element-1"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>x</mi><mo class="MathClass-punc">,</mo><mi>y</mi><mo class="MathClass-punc">,</mo><mi>z</mi></math></script>
components of the surface normals and directly stores them in the RGB values
of the texture. Since the RGB values of the normal map are in the range
<!--l. 184--><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;inline&quot;&gt;&lt;mrow&gt;&lt;mo class=&quot;MathClass-open&quot;&gt;[&lt;/mo&gt;&lt;mrow&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo class=&quot;MathClass-punc&quot;&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mo class=&quot;MathClass-close&quot;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-8" style="width: 2.227em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.106em; height: 0px; font-size: 104%;"><span style="position: absolute; clip: rect(1.746em, 1002.05em, 2.948em, -999.997em); top: -2.581em; left: 0em;"><span class="mrow" id="MathJax-Span-9"><span class="mrow" id="MathJax-Span-10"><span class="mo MathClass-open" id="MathJax-Span-11" style="vertical-align: 0.003em;"><span style="font-family: STIXGeneral-Regular;">[</span></span><span class="mrow" id="MathJax-Span-12"><span class="mn" id="MathJax-Span-13" style="font-family: STIXGeneral-Regular;">0</span><span class="mo MathClass-punc" id="MathJax-Span-14" style="font-family: STIXGeneral-Regular;">,</span><span class="mn" id="MathJax-Span-15" style="font-family: STIXGeneral-Regular; padding-left: 0.183em;">1</span></span><span class="mo MathClass-close" id="MathJax-Span-16" style="vertical-align: 0.003em;"><span style="font-family: STIXGeneral-Regular;">]</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.587em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mrow><mo class="MathClass-open">[</mo><mrow><mn>0</mn><mo class="MathClass-punc">,</mo><mn>1</mn></mrow><mo class="MathClass-close">]</mo></mrow></math></span></span><script type="math/mml" id="MathJax-Element-2"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mrow><mo class="MathClass-open">[</mo><mrow><mn>0</mn><mo class="MathClass-punc">,</mo> <mn>1</mn></mrow><mo class="MathClass-close">]</mo></mrow></math></script>, you will need
to map them to <!--l. 184--><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;inline&quot;&gt;&lt;mrow&gt;&lt;mo class=&quot;MathClass-open&quot;&gt;[&lt;/mo&gt;&lt;mrow&gt;&lt;mo class=&quot;MathClass-bin&quot;&gt;-&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo class=&quot;MathClass-punc&quot;&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mo class=&quot;MathClass-close&quot;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-17" style="width: 2.888em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.767em; height: 0px; font-size: 104%;"><span style="position: absolute; clip: rect(1.746em, 1002.71em, 2.948em, -999.997em); top: -2.581em; left: 0em;"><span class="mrow" id="MathJax-Span-18"><span class="mrow" id="MathJax-Span-19"><span class="mo MathClass-open" id="MathJax-Span-20" style="vertical-align: 0.003em;"><span style="font-family: STIXGeneral-Regular;">[</span></span><span class="mrow" id="MathJax-Span-21"><span class="mo MathClass-bin" id="MathJax-Span-22" style="font-family: STIXGeneral-Regular;">&#8722;</span><span class="mn" id="MathJax-Span-23" style="font-family: STIXGeneral-Regular;">1</span><span class="mo MathClass-punc" id="MathJax-Span-24" style="font-family: STIXGeneral-Regular;">,</span><span class="mn" id="MathJax-Span-25" style="font-family: STIXGeneral-Regular; padding-left: 0.183em;">1</span></span><span class="mo MathClass-close" id="MathJax-Span-26" style="vertical-align: 0.003em;"><span style="font-family: STIXGeneral-Regular;">]</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.587em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mrow><mo class="MathClass-open">[</mo><mrow><mo class="MathClass-bin">-</mo><mn>1</mn><mo class="MathClass-punc">,</mo><mn>1</mn></mrow><mo class="MathClass-close">]</mo></mrow></math></span></span><script type="math/mml" id="MathJax-Element-3"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mrow><mo class="MathClass-open">[</mo><mrow><mo class="MathClass-bin">-</mo><mn>1</mn><mo class="MathClass-punc">,</mo> <mn>1</mn></mrow><mo class="MathClass-close">]</mo></mrow></math></script>
and re-normalize the normal. Instead of using the mesh normals for lighting calculations, we use
the normal vector from the normal map. This creates the impression of fine 3D texture on the
surface.
   </p><div class="fancyvrb" id="fancyvrb3"><a id="x1-76r1"></a><span id="textcolor48"><span class="pcrro7t-x-x-120">//</span><span class="pcrro7t-x-x-120">&nbsp;Load</span><span class="pcrro7t-x-x-120">&nbsp;normal</span><span class="pcrro7t-x-x-120">&nbsp;from</span><span class="pcrro7t-x-x-120">&nbsp;normal</span><span class="pcrro7t-x-x-120">&nbsp;map</span><span class="pcrro7t-x-x-120">&nbsp;texture</span><span class="pcrro7t-x-x-120">&nbsp;RGB</span><span class="pcrro7t-x-x-120">&nbsp;value</span></span>
<br class="fancyvrb"><a id="x1-78r2"></a><span class="pcrr7t-x-x-120">normal</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor49"><span class="pcrr7t-x-x-120">=</span></span><span class="pcrr7t-x-x-120">&nbsp;texture2D(heightmap,</span><span class="pcrr7t-x-x-120">&nbsp;glTexCoord[</span><span id="textcolor50"><span class="pcrr7t-x-x-120">0</span></span><span class="pcrr7t-x-x-120">].st).rgb;</span><br class="fancyvrb"><a id="x1-80r3"></a>
<br class="fancyvrb"><a id="x1-82r4"></a><span id="textcolor51"><span class="pcrro7t-x-x-120">//</span><span class="pcrro7t-x-x-120">&nbsp;Map</span><span class="pcrro7t-x-x-120">&nbsp;components</span><span class="pcrro7t-x-x-120">&nbsp;[0,</span><span class="pcrro7t-x-x-120">&nbsp;1]</span><span class="pcrro7t-x-x-120">&nbsp;-&gt;</span><span class="pcrro7t-x-x-120">&nbsp;[-1,</span><span class="pcrro7t-x-x-120">&nbsp;1]</span><span class="pcrro7t-x-x-120">&nbsp;here</span></span><br class="fancyvrb"><a id="x1-84r5"></a><br class="fancyvrb"><a id="x1-86r6"></a><span id="textcolor52"><span class="pcrro7t-x-x-120">//</span><span class="pcrro7t-x-x-120">&nbsp;Re-normalize</span><span class="pcrro7t-x-x-120">&nbsp;normal</span><span class="pcrro7t-x-x-120">&nbsp;vector</span></span>
<br class="fancyvrb"><a id="x1-88r7"></a><span class="pcrr7t-x-x-120">normal</span><span class="pcrr7t-x-x-120">&nbsp;</span><span id="textcolor53"><span class="pcrr7t-x-x-120">=</span></span><span class="pcrr7t-x-x-120">&nbsp;normalize(normal);</span></div>
<!--l. 196--><p class="noindent">The normal vector is in the coordinate system of the flat surface the texture is
mapped onto. In order to calculate lighting, we must either transform the normal
into camera space, or transform the lights and camera into the surface coordinates.
We can easily transform between these two coordinate systems with a <span class="cmbx-12">tangent</span>
<span class="cmbx-12">binormal normal (TBN) matrix</span>. The tangent is a vector along the surface in the
<!--l. 196--><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;inline&quot;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-27" style="width: 0.484em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.424em; height: 0px; font-size: 104%;"><span style="position: absolute; clip: rect(1.986em, 1000.42em, 2.767em, -999.997em); top: -2.581em; left: 0em;"><span class="mrow" id="MathJax-Span-28"><span class="mi" id="MathJax-Span-29" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.587em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>x</mi></math></span></span><script type="math/mml" id="MathJax-Element-4"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>x</mi></math></script> direction of the texture,
and the binormal is in the <!--l. 196--><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;inline&quot;&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-30" style="width: 0.484em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.424em; height: 0px; font-size: 104%;"><span style="position: absolute; clip: rect(1.986em, 1000.42em, 2.948em, -999.997em); top: -2.581em; left: 0em;"><span class="mrow" id="MathJax-Span-31"><span class="mi" id="MathJax-Span-32" style="font-family: STIXGeneral-Italic;">y</span></span><span style="display: inline-block; width: 0px; height: 2.587em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>y</mi></math></span></span><script type="math/mml" id="MathJax-Element-5"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>y</mi></math></script>
direction.
</p><div class="center">
<!--l. 198--><p class="noindent">
<!--l. 199--></p><p class="noindent"><img src="./notes-hw4_files/vectors.png" alt="pict" width="704.63252pt"><br>
<span class="cmbx-12">Figure 3: </span>The tangent vector is a vector in the u direction of the texture tangent to the
surface. The binormal is also tangent to the surface but in the v direction. Together, the
tangent, binormal, and normal form a coordinate system on the surface of the object. The
binormal is also called the bitangent, since it is also tangent to the surface plane.</p></div>
<!--l. 203--><p class="noindent">The following is the formula for our TBN matrix:
<!--l. 206--></p><p class="indent">
<!--tex4ht:inline--><!--l. 206--><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mo class=&quot;MathClass-rel&quot;&gt;=&lt;/mo&gt;&lt;mfenced separators=&quot;&quot; open=&quot;[&quot; close=&quot;]&quot;&gt;&lt;mrow&gt;&lt;mtable class=&quot;array&quot; align=&quot;axis&quot; style=&quot;&quot; equalrows=&quot;false&quot; columnlines=&quot;none none none none none none none none none&quot; equalcolumns=&quot;false&quot;&gt;&lt;mtr&gt;&lt;mtd class=&quot;array&quot; columnalign=&quot;center&quot;&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;mtd class=&quot;array&quot; columnalign=&quot;center&quot;&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;mtd class=&quot;array&quot; columnalign=&quot;center&quot;&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd class=&quot;array&quot; columnalign=&quot;center&quot;&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;mtd class=&quot;array&quot; columnalign=&quot;center&quot;&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;mtd class=&quot;array&quot; columnalign=&quot;center&quot;&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd class=&quot;array&quot; columnalign=&quot;center&quot;&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;mtd class=&quot;array&quot; columnalign=&quot;center&quot;&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;mtd class=&quot;array&quot; columnalign=&quot;center&quot;&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/mrow&gt;&lt;/mfenced&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-33" style="width: 8.116em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.816em; height: 0px; font-size: 104%;"><span style="position: absolute; clip: rect(1.325em, 1007.82em, 5.953em, -999.997em); top: -3.903em; left: 0em;"><span class="mrow" id="MathJax-Span-34"><span class="mi" id="MathJax-Span-35" style="font-family: STIXGeneral-Italic;">s</span><span class="mo MathClass-rel" id="MathJax-Span-36" style="font-family: STIXGeneral-Regular; padding-left: 0.303em;">=</span><span class="mfenced" id="MathJax-Span-37" style="padding-left: 0.303em;"><span class="mo" id="MathJax-Span-40" style="vertical-align: 2.407em;"><span style="display: inline-block; position: relative; width: 0.424em; height: 0px;"><span style="position: absolute; font-family: STIXSizeOneSym; top: -3.362em; left: 0em;">&#9121;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; font-family: STIXSizeOneSym; top: -0.057em; left: 0em;">&#9123;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="font-family: STIXSizeOneSym; position: absolute; top: -2.521em; left: 0em;">&#9122;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="font-family: STIXSizeOneSym; position: absolute; top: -1.74em; left: 0em;">&#9122;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="font-family: STIXSizeOneSym; position: absolute; top: -0.898em; left: 0em;">&#9122;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span><span class="mrow" id="MathJax-Span-39"><span class="mtable array" id="MathJax-Span-41" style="padding-right: 0.183em; padding-left: 0.183em;"><span style="display: inline-block; position: relative; width: 4.45em; height: 0px;"><span style="position: absolute; clip: rect(2.587em, 1000.9em, 6.794em, -999.997em); top: -4.865em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.904em; height: 0px;"><span style="position: absolute; clip: rect(3.308em, 1000.66em, 4.39em, -999.997em); top: -5.586em; left: 50%; margin-left: -0.358em;"><span class="mtd array" id="MathJax-Span-42"><span class="mrow" id="MathJax-Span-43"><span class="msub" id="MathJax-Span-44"><span style="display: inline-block; position: relative; width: 0.664em; height: 0px;"><span style="position: absolute; clip: rect(3.308em, 1000.3em, 4.21em, -999.997em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-45"><span class="mi" id="MathJax-Span-46" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; top: -3.903em; left: 0.303em;"><span class="mrow" id="MathJax-Span-47"><span class="mi" id="MathJax-Span-48" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; clip: rect(3.188em, 1000.9em, 4.39em, -999.997em); top: -4.023em; left: 50%; margin-left: -0.418em;"><span class="mtd array" id="MathJax-Span-63"><span class="mrow" id="MathJax-Span-64"><span class="msub" id="MathJax-Span-65"><span style="display: inline-block; position: relative; width: 0.904em; height: 0px;"><span style="position: absolute; clip: rect(3.188em, 1000.48em, 4.21em, -999.997em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-66"><span class="mi" id="MathJax-Span-67" style="font-family: STIXGeneral-Italic;">b</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; top: -3.903em; left: 0.484em;"><span class="mrow" id="MathJax-Span-68"><span class="mi" id="MathJax-Span-69" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; clip: rect(3.428em, 1000.9em, 4.39em, -999.997em); top: -2.461em; left: 50%; margin-left: -0.418em;"><span class="mtd array" id="MathJax-Span-84"><span class="mrow" id="MathJax-Span-85"><span class="msub" id="MathJax-Span-86"><span style="display: inline-block; position: relative; width: 0.904em; height: 0px;"><span style="position: absolute; clip: rect(3.428em, 1000.48em, 4.21em, -999.997em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-87"><span class="mi" id="MathJax-Span-88" style="font-family: STIXGeneral-Italic;">n</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; top: -3.903em; left: 0.484em;"><span class="mrow" id="MathJax-Span-89"><span class="mi" id="MathJax-Span-90" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.871em;"></span></span><span style="position: absolute; clip: rect(2.707em, 1000.9em, 7.034em, -999.997em); top: -4.985em; left: 1.806em;"><span style="display: inline-block; position: relative; width: 0.904em; height: 0px;"><span style="position: absolute; clip: rect(3.308em, 1000.66em, 4.51em, -999.997em); top: -5.586em; left: 50%; margin-left: -0.358em;"><span class="mtd array" id="MathJax-Span-49"><span class="mrow" id="MathJax-Span-50"><span class="msub" id="MathJax-Span-51"><span style="display: inline-block; position: relative; width: 0.664em; height: 0px;"><span style="position: absolute; clip: rect(3.308em, 1000.3em, 4.21em, -999.997em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-52"><span class="mi" id="MathJax-Span-53" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; top: -3.903em; left: 0.303em;"><span class="mrow" id="MathJax-Span-54"><span class="mi" id="MathJax-Span-55" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">y</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; clip: rect(3.188em, 1000.9em, 4.51em, -999.997em); top: -4.023em; left: 50%; margin-left: -0.418em;"><span class="mtd array" id="MathJax-Span-70"><span class="mrow" id="MathJax-Span-71"><span class="msub" id="MathJax-Span-72"><span style="display: inline-block; position: relative; width: 0.904em; height: 0px;"><span style="position: absolute; clip: rect(3.188em, 1000.48em, 4.21em, -999.997em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-73"><span class="mi" id="MathJax-Span-74" style="font-family: STIXGeneral-Italic;">b</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; top: -3.903em; left: 0.484em;"><span class="mrow" id="MathJax-Span-75"><span class="mi" id="MathJax-Span-76" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">y</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; clip: rect(3.428em, 1000.9em, 4.51em, -999.997em); top: -2.461em; left: 50%; margin-left: -0.418em;"><span class="mtd array" id="MathJax-Span-91"><span class="mrow" id="MathJax-Span-92"><span class="msub" id="MathJax-Span-93"><span style="display: inline-block; position: relative; width: 0.904em; height: 0px;"><span style="position: absolute; clip: rect(3.428em, 1000.48em, 4.21em, -999.997em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-94"><span class="mi" id="MathJax-Span-95" style="font-family: STIXGeneral-Italic;">n</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; top: -3.903em; left: 0.484em;"><span class="mrow" id="MathJax-Span-96"><span class="mi" id="MathJax-Span-97" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">y</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.991em;"></span></span><span style="position: absolute; clip: rect(2.647em, 1000.84em, 6.914em, -999.997em); top: -4.925em; left: 3.609em;"><span style="display: inline-block; position: relative; width: 0.844em; height: 0px;"><span style="position: absolute; clip: rect(3.308em, 1000.6em, 4.39em, -999.997em); top: -5.586em; left: 50%; margin-left: -0.297em;"><span class="mtd array" id="MathJax-Span-56"><span class="mrow" id="MathJax-Span-57"><span class="msub" id="MathJax-Span-58"><span style="display: inline-block; position: relative; width: 0.604em; height: 0px;"><span style="position: absolute; clip: rect(3.308em, 1000.3em, 4.21em, -999.997em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-59"><span class="mi" id="MathJax-Span-60" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; top: -3.903em; left: 0.303em;"><span class="mrow" id="MathJax-Span-61"><span class="mi" id="MathJax-Span-62" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">z</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; clip: rect(3.188em, 1000.84em, 4.39em, -999.997em); top: -4.023em; left: 50%; margin-left: -0.418em;"><span class="mtd array" id="MathJax-Span-77"><span class="mrow" id="MathJax-Span-78"><span class="msub" id="MathJax-Span-79"><span style="display: inline-block; position: relative; width: 0.844em; height: 0px;"><span style="position: absolute; clip: rect(3.188em, 1000.48em, 4.21em, -999.997em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-80"><span class="mi" id="MathJax-Span-81" style="font-family: STIXGeneral-Italic;">b</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; top: -3.903em; left: 0.484em;"><span class="mrow" id="MathJax-Span-82"><span class="mi" id="MathJax-Span-83" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">z</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; clip: rect(3.428em, 1000.84em, 4.39em, -999.997em); top: -2.461em; left: 50%; margin-left: -0.418em;"><span class="mtd array" id="MathJax-Span-98"><span class="mrow" id="MathJax-Span-99"><span class="msub" id="MathJax-Span-100"><span style="display: inline-block; position: relative; width: 0.844em; height: 0px;"><span style="position: absolute; clip: rect(3.428em, 1000.48em, 4.21em, -999.997em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-101"><span class="mi" id="MathJax-Span-102" style="font-family: STIXGeneral-Italic;">n</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; top: -3.903em; left: 0.484em;"><span class="mrow" id="MathJax-Span-103"><span class="mi" id="MathJax-Span-104" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">z</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.931em;"></span></span></span></span></span><span class="mo" id="MathJax-Span-105" style="vertical-align: 2.407em;"><span style="display: inline-block; position: relative; width: 0.424em; height: 0px;"><span style="position: absolute; font-family: STIXSizeOneSym; top: -3.362em; left: 0em;">&#9124;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; font-family: STIXSizeOneSym; top: -0.057em; left: 0em;">&#9126;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="font-family: STIXSizeOneSym; position: absolute; top: -2.521em; left: 0em;">&#9125;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="font-family: STIXSizeOneSym; position: absolute; top: -1.74em; left: 0em;">&#9125;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="font-family: STIXSizeOneSym; position: absolute; top: -0.898em; left: 0em;">&#9125;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span></span><span class="mi" id="MathJax-Span-106" style="font-family: STIXGeneral-Italic;">c</span></span><span style="display: inline-block; width: 0px; height: 3.909em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.997em; border-left: 0px solid; width: 0px; height: 4.566em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>s</mi><mo class="MathClass-rel">=</mo><mfenced separators="" open="[" close="]"><mrow><mtable class="array" align="axis" style="" equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false"><mtr><mtd class="array" columnalign="center"><msub><mrow><mi>t</mi></mrow><mrow><mi>x</mi></mrow></msub></mtd><mtd class="array" columnalign="center"><msub><mrow><mi>t</mi></mrow><mrow><mi>y</mi></mrow></msub></mtd><mtd class="array" columnalign="center"><msub><mrow><mi>t</mi></mrow><mrow><mi>z</mi></mrow></msub></mtd></mtr><mtr><mtd class="array" columnalign="center"><msub><mrow><mi>b</mi></mrow><mrow><mi>x</mi></mrow></msub></mtd><mtd class="array" columnalign="center"><msub><mrow><mi>b</mi></mrow><mrow><mi>y</mi></mrow></msub></mtd><mtd class="array" columnalign="center"><msub><mrow><mi>b</mi></mrow><mrow><mi>z</mi></mrow></msub></mtd></mtr><mtr><mtd class="array" columnalign="center"><msub><mrow><mi>n</mi></mrow><mrow><mi>x</mi></mrow></msub></mtd><mtd class="array" columnalign="center"><msub><mrow><mi>n</mi></mrow><mrow><mi>y</mi></mrow></msub></mtd><mtd class="array" columnalign="center"><msub><mrow><mi>n</mi></mrow><mrow><mi>z</mi></mrow></msub></mtd></mtr></mtable></mrow></mfenced><mi>c</mi></math></span></span></div><script type="math/mml" id="MathJax-Element-6"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mi>s</mi> <mo class="MathClass-rel">=</mo>  <mfenced separators="" open="[" close="]"><mrow><mtable align="axis" style="" equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"> <mtr><mtd class="array" columnalign="center"><msub><mrow><mi>t</mi></mrow><mrow><mi>x</mi></mrow></msub></mtd><mtd class="array" columnalign="center"><msub><mrow><mi>t</mi></mrow><mrow><mi>y</mi></mrow></msub></mtd><mtd class="array" columnalign="center"><msub><mrow><mi>t</mi></mrow><mrow><mi>z</mi></mrow></msub></mtd>
</mtr> <mtr><mtd class="array" columnalign="center"><msub><mrow><mi>b</mi></mrow><mrow><mi>x</mi></mrow></msub></mtd><mtd class="array" columnalign="center"><msub><mrow><mi>b</mi></mrow><mrow><mi>y</mi></mrow></msub></mtd><mtd class="array" columnalign="center"><msub><mrow><mi>b</mi></mrow><mrow><mi>z</mi></mrow></msub></mtd>
</mtr> <mtr><mtd class="array" columnalign="center"><msub><mrow><mi>n</mi></mrow><mrow><mi>x</mi></mrow></msub></mtd><mtd class="array" columnalign="center"><msub><mrow><mi>n</mi></mrow><mrow><mi>y</mi></mrow></msub></mtd><mtd class="array" columnalign="center"><msub><mrow><mi>n</mi></mrow><mrow><mi>z</mi></mrow></msub></mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                                                              </mrow></mfenced> <mi>c</mi>
</math></script>
                                                                                         
                                                                                         
<!--l. 214--></p><p class="nopar">
<!--l. 216--></p><p class="noindent">where <!--l. 216--><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;inline&quot;&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-107" style="width: 0.484em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.424em; height: 0px; font-size: 104%;"><span style="position: absolute; clip: rect(1.986em, 1000.42em, 2.767em, -999.997em); top: -2.581em; left: 0em;"><span class="mrow" id="MathJax-Span-108"><span class="mi" id="MathJax-Span-109" style="font-family: STIXGeneral-Italic;">c</span></span><span style="display: inline-block; width: 0px; height: 2.587em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>c</mi></math></span></span><script type="math/mml" id="MathJax-Element-7"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>c</mi></math></script> is the vector in the
camera frame and <!--l. 216--><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;inline&quot;&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-110" style="width: 0.424em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.364em; height: 0px; font-size: 104%;"><span style="position: absolute; clip: rect(1.986em, 1000.36em, 2.767em, -999.997em); top: -2.581em; left: 0em;"><span class="mrow" id="MathJax-Span-111"><span class="mi" id="MathJax-Span-112" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.587em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>s</mi></math></span></span><script type="math/mml" id="MathJax-Element-8"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>s</mi></math></script> is the
vector in the surface frame. <!--l. 216--><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;inline&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo class=&quot;MathClass-punc&quot;&gt;,&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mo class=&quot;MathClass-punc&quot;&gt;,&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-113" style="width: 2.287em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.166em; height: 0px; font-size: 104%;"><span style="position: absolute; clip: rect(1.746em, 1002.17em, 2.888em, -999.997em); top: -2.581em; left: 0em;"><span class="mrow" id="MathJax-Span-114"><span class="mi" id="MathJax-Span-115" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo MathClass-punc" id="MathJax-Span-116" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-117" style="font-family: STIXGeneral-Italic; padding-left: 0.183em;">b</span><span class="mo MathClass-punc" id="MathJax-Span-118" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-119" style="font-family: STIXGeneral-Italic; padding-left: 0.183em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.587em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.184em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>t</mi><mo class="MathClass-punc">,</mo><mi>b</mi><mo class="MathClass-punc">,</mo><mi>n</mi></math></span></span><script type="math/mml" id="MathJax-Element-9"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>t</mi><mo class="MathClass-punc">,</mo><mi>b</mi><mo class="MathClass-punc">,</mo><mi>n</mi></math></script>
are the tangent, binormal, and normal vectors in camera space.
<!--l. 218--></p><p class="noindent">This matrix is equivalent to taking the dot product for each component with
<!--l. 218--><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;inline&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo class=&quot;MathClass-punc&quot;&gt;,&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mo class=&quot;MathClass-punc&quot;&gt;,&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-120" style="width: 2.287em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.166em; height: 0px; font-size: 104%;"><span style="position: absolute; clip: rect(1.746em, 1002.17em, 2.888em, -999.997em); top: -2.581em; left: 0em;"><span class="mrow" id="MathJax-Span-121"><span class="mi" id="MathJax-Span-122" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo MathClass-punc" id="MathJax-Span-123" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-124" style="font-family: STIXGeneral-Italic; padding-left: 0.183em;">b</span><span class="mo MathClass-punc" id="MathJax-Span-125" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-126" style="font-family: STIXGeneral-Italic; padding-left: 0.183em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.587em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.184em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>t</mi><mo class="MathClass-punc">,</mo><mi>b</mi><mo class="MathClass-punc">,</mo><mi>n</mi></math></span></span><script type="math/mml" id="MathJax-Element-10"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline"><mi>t</mi><mo class="MathClass-punc">,</mo><mi>b</mi><mo class="MathClass-punc">,</mo><mi>n</mi></math></script>,
projecting the original vector onto each axis of the new coordinate system:
<!--l. 221--></p><p class="indent">
<!--tex4ht:inline--><!--l. 221--><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mrow class=&quot;cases&quot;&gt;&lt;mfenced separators=&quot;&quot; open=&quot;{&quot; close=&quot;&quot;&gt;&lt;mrow&gt;&lt;mtable class=&quot;array&quot; align=&quot;axis&quot; style=&quot;&quot; equalrows=&quot;false&quot; columnlines=&quot;none&quot; equalcolumns=&quot;false&quot;&gt;&lt;mtr&gt;&lt;mtd class=&quot;array&quot; columnalign=&quot;left&quot;&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo class=&quot;MathClass-rel&quot;&gt;=&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo class=&quot;MathClass-bin&quot;&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mspace class=&quot;quad&quot; width=&quot;1em&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd class=&quot;array&quot; columnalign=&quot;left&quot;&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo class=&quot;MathClass-rel&quot;&gt;=&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mo class=&quot;MathClass-bin&quot;&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mspace class=&quot;quad&quot; width=&quot;1em&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd class=&quot;array&quot; columnalign=&quot;left&quot;&gt;&lt;msub&gt;&lt;mrow&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo class=&quot;MathClass-rel&quot;&gt;=&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo class=&quot;MathClass-bin&quot;&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mspace class=&quot;quad&quot; width=&quot;1em&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/mrow&gt;&lt;/mfenced&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-127" style="width: 6.193em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.953em; height: 0px; font-size: 104%;"><span style="position: absolute; clip: rect(1.085em, 1005.77em, 5.532em, -999.997em); top: -3.543em; left: 0em;"><span class="mrow" id="MathJax-Span-128"><span class="mrow cases" id="MathJax-Span-129"><span class="mfenced" id="MathJax-Span-130"><span class="mo" id="MathJax-Span-131" style="vertical-align: 2.287em;"><span style="display: inline-block; position: relative; width: 0.664em; height: 0px;"><span style="position: absolute; font-family: STIXSizeOneSym; top: -3.302em; left: 0em;">&#9127;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; font-family: STIXSizeOneSym; top: -0.237em; left: 0em;">&#9129;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; font-family: STIXSizeOneSym; top: -1.8em; left: 0em;">&#9128;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="font-family: STIXSizeOneSym; position: absolute; top: -2.581em; left: 0em;">&#9130;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="font-family: STIXSizeOneSym; position: absolute; top: -1.019em; left: 0em;">&#9130;<span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span><span class="mrow" id="MathJax-Span-132"><span class="mtable array" id="MathJax-Span-133" style="padding-right: 0.183em; padding-left: 0.183em;"><span style="display: inline-block; position: relative; width: 4.931em; height: 0px;"><span style="position: absolute; clip: rect(2.587em, 1004.93em, 6.794em, -999.997em); top: -4.805em; left: 0em;"><span style="display: inline-block; position: relative; width: 4.931em; height: 0px;"><span style="position: absolute; clip: rect(3.308em, 1004.69em, 4.39em, -999.997em); top: -5.526em; left: 0em;"><span class="mtd array" id="MathJax-Span-134"><span class="mrow" id="MathJax-Span-135"><span class="msub" id="MathJax-Span-136"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.428em, 1000.36em, 4.21em, -999.997em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-137"><span class="mi" id="MathJax-Span-138" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; top: -3.903em; left: 0.364em;"><span class="mrow" id="MathJax-Span-139"><span class="mi" id="MathJax-Span-140" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span><span class="mo MathClass-rel" id="MathJax-Span-141" style="font-family: STIXGeneral-Regular; padding-left: 0.303em;">=</span><span class="mi" id="MathJax-Span-142" style="font-family: STIXGeneral-Italic; padding-left: 0.303em;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo MathClass-bin" id="MathJax-Span-143" style="font-family: STIXGeneral-Regular; padding-left: 0.243em;">&#8901;</span><span class="mi" id="MathJax-Span-144" style="font-family: STIXGeneral-Italic; padding-left: 0.243em;">c</span><span class="mspace quad" id="MathJax-Span-145" style="height: 0em; vertical-align: 0em; width: 1.145em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; clip: rect(3.188em, 1004.93em, 4.51em, -999.997em); top: -4.023em; left: 0em;"><span class="mtd array" id="MathJax-Span-146"><span class="mrow" id="MathJax-Span-147"><span class="msub" id="MathJax-Span-148"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.428em, 1000.36em, 4.21em, -999.997em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-149"><span class="mi" id="MathJax-Span-150" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; top: -3.903em; left: 0.364em;"><span class="mrow" id="MathJax-Span-151"><span class="mi" id="MathJax-Span-152" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">y</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span><span class="mo MathClass-rel" id="MathJax-Span-153" style="font-family: STIXGeneral-Regular; padding-left: 0.303em;">=</span><span class="mi" id="MathJax-Span-154" style="font-family: STIXGeneral-Italic; padding-left: 0.303em;">b</span><span class="mo MathClass-bin" id="MathJax-Span-155" style="font-family: STIXGeneral-Regular; padding-left: 0.243em;">&#8901;</span><span class="mi" id="MathJax-Span-156" style="font-family: STIXGeneral-Italic; padding-left: 0.243em;">c</span><span class="mspace quad" id="MathJax-Span-157" style="height: 0em; vertical-align: 0em; width: 1.145em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; clip: rect(3.428em, 1004.87em, 4.39em, -999.997em); top: -2.461em; left: 0em;"><span class="mtd array" id="MathJax-Span-158"><span class="mrow" id="MathJax-Span-159"><span class="msub" id="MathJax-Span-160"><span style="display: inline-block; position: relative; width: 0.724em; height: 0px;"><span style="position: absolute; clip: rect(3.428em, 1000.36em, 4.21em, -999.997em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-161"><span class="mi" id="MathJax-Span-162" style="font-family: STIXGeneral-Italic;">s</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span><span style="position: absolute; top: -3.903em; left: 0.364em;"><span class="mrow" id="MathJax-Span-163"><span class="mi" id="MathJax-Span-164" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">z</span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span></span><span class="mo MathClass-rel" id="MathJax-Span-165" style="font-family: STIXGeneral-Regular; padding-left: 0.303em;">=</span><span class="mi" id="MathJax-Span-166" style="font-family: STIXGeneral-Italic; padding-left: 0.303em;">n</span><span class="mo MathClass-bin" id="MathJax-Span-167" style="font-family: STIXGeneral-Regular; padding-left: 0.243em;">&#8901;</span><span class="mi" id="MathJax-Span-168" style="font-family: STIXGeneral-Italic; padding-left: 0.243em;">c</span><span class="mspace quad" id="MathJax-Span-169" style="height: 0em; vertical-align: 0em; width: 1.145em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.029em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.811em;"></span></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.549em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.934em; border-left: 0px solid; width: 0px; height: 4.378em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="cases"><mfenced separators="" open="{" close=""><mrow><mtable class="array" align="axis" style="" equalrows="false" columnlines="none" equalcolumns="false"><mtr><mtd class="array" columnalign="left"><msub><mrow><mi>s</mi></mrow><mrow><mi>x</mi></mrow></msub><mo class="MathClass-rel">=</mo><mi>t</mi><mo class="MathClass-bin">&#8901;</mo><mi>c</mi><mspace class="quad" width="1em"></mspace></mtd></mtr><mtr><mtd class="array" columnalign="left"><msub><mrow><mi>s</mi></mrow><mrow><mi>y</mi></mrow></msub><mo class="MathClass-rel">=</mo><mi>b</mi><mo class="MathClass-bin">&#8901;</mo><mi>c</mi><mspace class="quad" width="1em"></mspace></mtd></mtr><mtr><mtd class="array" columnalign="left"><msub><mrow><mi>s</mi></mrow><mrow><mi>z</mi></mrow></msub><mo class="MathClass-rel">=</mo><mi>n</mi><mo class="MathClass-bin">&#8901;</mo><mi>c</mi><mspace class="quad" width="1em"></mspace></mtd></mtr></mtable></mrow></mfenced></mrow></math></span></span></div><script type="math/mml" id="MathJax-Element-11"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow class="cases"> <mfenced separators="" open="{" close=""><mrow> <mtable align="axis" style="" equalrows="false" columnlines="none" equalcolumns="false" class="array"> <mtr><mtd class="array" columnalign="left"><msub><mrow><mi>s</mi></mrow><mrow><mi>x</mi></mrow></msub> <mo class="MathClass-rel">=</mo> <mi>t</mi> <mo class="MathClass-bin">&#8901;</mo> <mi>c</mi><mspace width="1em" class="quad"></mspace></mtd>
</mtr>  <mtr><mtd class="array" columnalign="left"><msub><mrow><mi>s</mi></mrow><mrow><mi>y</mi></mrow></msub> <mo class="MathClass-rel">=</mo> <mi>b</mi> <mo class="MathClass-bin">&#8901;</mo> <mi>c</mi><mspace width="1em" class="quad"></mspace></mtd></mtr>  <mtr><mtd class="array" columnalign="left"><msub><mrow><mi>s</mi></mrow><mrow>
<mi>z</mi></mrow></msub> <mo class="MathClass-rel">=</mo> <mi>n</mi> <mo class="MathClass-bin">&#8901;</mo> <mi>c</mi><mspace width="1em" class="quad"></mspace></mtd></mtr> <!--@{}l@{\quad }l@{}--></mtable>                                                                                          </mrow></mfenced></mrow>
</math></script>
<!--l. 226--></p><p class="nopar">
</p><div class="center">
<!--l. 229--><p class="noindent">
<!--l. 230--></p><p class="noindent"><img src="./notes-hw4_files/transform.png" alt="pict" width="375.80544pt"><br>
<span class="cmbx-12">Figure 4: </span>In order to transform a vector into a new coordinate system, each component is
just equal to the dot product of the vector with the unit vector of each axis of the new
coordinate system. This is shown with a 2D coordinate transform above.</p></div>
<!--l. 234--><p class="noindent">OpenGL gives the normal vector for each vertex as a builtin. For the tangent, an OpenGL
attribute must be defined in the CPU code and set for each vertex. In general, the tangent
can be computed from the normal and the texture coordinates, but is often already
generated when a texture is first created for an object. Many proprietary formats for
3D models include specification for texture tangent vectors. The binormal is a third
orthogonal vector, so it can just be calculated as the cross product of the normal and
tangent.
<!--l. 236--></p><p class="noindent">The camera and light vectors should be calculated and transformed into surface space by the
vertex shader. These values can be stored as varying, and the interpolated values can be accessed
from the fragment shader. The surface normal for each pixel should be sampled from the normal
map, and the final color value can be calculated then.
<!--l. 238--></p><p class="indent">   </p><hr>
<div class="center">
                                                                                         
                                                                                         
<!--l. 241--><p class="noindent">
<!--l. 242--></p><p class="noindent"><span class="cmbx-12">Original assignment by Andrew Zhao (Class of 2016).</span><br>
<span class="cmbx-12">Updated by Brian Lee (Class of 2018).</span><br>
<span class="cmbx-12">Links: </span><a href="http://courses.cms.caltech.edu/cs171/intro.html"><span class="cmbx-12">Home</span></a>  <a href="http://courses.cms.caltech.edu/cs171/assignments/index.html"><span class="cmbx-12">Assignments</span></a>  <a href="http://courses.cms.caltech.edu/cs171/contacts.html"><span class="cmbx-12">Contacts</span></a>  <a href="http://courses.cms.caltech.edu/cs171/policies.html"><span class="cmbx-12">Policies</span></a>  <a href="http://courses.cms.caltech.edu/cs171/resources.html"><span class="cmbx-12">Resources</span></a></p></div>
    
 

                                                                                         


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: STIXSizeOneSym, sans-serif;"></div></div></body></html>